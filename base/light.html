<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/three@0.147.0/build/three.min.js"></script>
    <title>Document</title>
    <script>
        window.addEventListener('DOMContentLoaded', init);

        function init() {
            const width = 960;
            const height = 540;

            // ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼
            const renderer = new THREE.WebGLRenderer({
                canvas: document.querySelector('#myCanvas'),
            });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(width, height);

            // ã‚·ãƒ¼ãƒ³
            const scene = new THREE.Scene();

            // ã‚«ãƒ¡ãƒ©
            const camera = new THREE.PerspectiveCamera(45, width / height);
            camera.position.set(20, 20, 20);
            camera.lookAt(new THREE.Vector3(0, 0, 0));

            // åºŠ
            const meshFloor = new THREE.Mesh(
                new THREE.BoxGeometry(2000, 0.1, 2000),
                new THREE.MeshStandardMaterial({ color: 0x808080, roughness: 0.0 })
            );
            scene.add(meshFloor);

            // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
            const meshKnot = new THREE.Mesh(
                new THREE.TorusKnotGeometry(3, 1, 100, 16),
                new THREE.MeshStandardMaterial({ color: 0xaa0000, roughness: 0.0 })
            );
            meshKnot.position.set(0, 5, 0);
            scene.add(meshKnot);

            /*
            AmbientLight ç’°å¢ƒå…‰æº
            3Dç©ºé–“å…¨ä½“ã«å‡ç­‰ã«å…‰ã‚’å½“ã¦ã‚‹
            é™°å½±ã‚„å½±(cast shadow)ãŒã§ããªã„ã®ã§ã€ã“ã®å…‰æºã ã‘ã ã¨ç«‹ä½“æ„Ÿã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ã¯ã§ããªã„
            THREE.AmbientLight(è‰², å…‰ã®å¼·ã•)
            */
            // const light = new THREE.AmbientLight(0xffffff, 1.0);
            // scene.add(light);

            /*
            DirectiontLight å¹³è¡Œå…‰æº
            ç„¡é™ã«é›¢ã‚Œã¦ã„ã‚‹ã¨ã“ã‚ã‹ã‚‰ç‰¹å®šã®æ–¹å‘ã«æ”¾å°„ã•ã‚Œã‚‹å…‰
            å¤ªé™½ğŸŒ
            THREE.DirectionalLight(è‰², å…‰ã®å¼·ã•)
            */
            // const light = new THREE.DirectionalLight(0xFFFFFF, 1);
            // scene.add(light);

            // // ç…§æ˜ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼
            // const lightHelper = new THREE.DirectionalLightHelper(light);
            // scene.add(lightHelper);

            /*
            HemisphereLight åŠçƒå…‰æº
            ä¸Šã‹ã‚‰ã®å…‰ã®è‰²ã¨ä¸‹ã‹ã‚‰ã®å…‰ã®è‰²ã‚’åˆ†ã‘ã‚‰ã‚Œã‚‹
            ä¸‹ã‹ã‚‰ã®å…‰ã¯åå°„å…‰ã¨ã—ã¦ã€å±‹å¤–ã§ã®å…‰ã®è¦‹ãˆæ–¹ã«è¿‘ããªã‚‹
            THREE.HemisphereLight(ç©ºã®è‰², åœ°ã®è‰², å…‰ã®å¼·ã•)
            */
            // const light = new THREE.HemisphereLight(0x888888, 0x0000FF, 1.0);
            // scene.add(light);

            // // ç…§æ˜ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼
            // const lightHelper = new THREE.HemisphereLightHelper(light);
            // scene.add(lightHelper);

            /*
            PointLight ç‚¹å…‰æº
            å˜ä¸€ç‚¹ã‹ã‚‰ã‚ã‚‰ã‚†ã‚‹æ–¹å‘ã‹ã‚‰æ”¾å°„ã•ã‚Œã‚‹å…‰æº
            è£¸é›»çƒğŸ’¡
            THREE.PointLight(è‰², å…‰ã®å¼·ã•, è·é›¢, å…‰ã®æ¸›è¡°ç‡)
            */
            // const light = new THREE.PointLight(0xFFFFFF, 2, 50, 1.0);
            // scene.add(light);

            // // ç…§æ˜ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼
            // const lightHelper = new THREE.PointLightHelper(light);
            // scene.add(lightHelper);

            /*
            SpotLight ã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆå…‰æº
            å˜ä¸€ã®ç‚¹ã‹ã‚‰ä¸€æ–¹å‘ã«æ”¾å‡ºã•ã‚Œã€å††éŒã«æ²¿ã£ã¦æ”¾å‡ºã•ã‚Œã‚‹å…‰æº
            æ‡ä¸­é›»ç¯ğŸ”¦ã€ã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆğŸ•º
            THREE.SpotLight(è‰², å…‰ã®å¼·ã•, è·é›¢, ç…§å°„è§’, ãƒœã‚±å…·åˆ, æ¸›è¡°ç‡)
            */
            // const light = new THREE.SpotLight(0xFFFFFF, 4, 30, Math.PI / 4, 0, 0.5);
            // scene.add(light);

            // // ç…§æ˜ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼
            // const lightHelper = new THREE.SpotLightHelper(light);
            // scene.add(lightHelper);

            /*
            RectAreaLight çŸ©å½¢å…‰æº
            é¢ã‚’æ¨ªåˆ‡ã£ã¦çŸ©å½¢å¹³é¢ã«å‡ä¸€ã«æ”¾å‡ºã•ã‚Œã‚‹å…‰æº
            æ˜ã‚‹ã„çª“ã‚„ã‚¹ãƒˆãƒªãƒƒãƒ—ç…§æ˜ã®ã‚ˆã†ãªã‚‚ã®ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã‚‹
            THREE.RectAreaLight(è‰², å…‰ã®å¼·ã•, å¹…, é«˜ã•)
            */
            const light = new THREE.RectAreaLight(0xFFFFFF, 5.0, 10, 10);
            scene.add(light);

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            tick();
            function tick() {
                renderer.render(scene, camera);

                // ç…§æ˜ã®ä½ç½®ã‚’æ›´æ–°
                const t = Date.now() / 500;
                const r = 20.0;
                const lx = r * Math.cos(t);
                const lz = r * Math.sin(t);
                const ly = 6.0 + 5.0 * Math.sin(t / 3.0);
                light.position.set(lx, ly, lz);

                requestAnimationFrame(tick);
            }
        }
    </script>
</head>
<body>
    <canvas id="myCanvas"></canvas>
</body>
</html>